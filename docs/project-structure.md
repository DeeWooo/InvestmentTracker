# InvestmentTracker é¡¹ç›®ç»“æ„

> æœ¬æ–‡æ¡£æè¿°äº†é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç»„ç»‡æ–¹å¼

## ä¸€ã€ç›®å½•ç»“æ„æ€»è§ˆ

```
ğŸ“¦ InvestmentTracker/
â”‚
â”œâ”€ ğŸ“„ æ ¹ç›®å½•é…ç½®æ–‡ä»¶ï¼ˆProject Configurationï¼‰
â”‚  â”œâ”€ package.json                    # é¡¹ç›®å…ƒæ•°æ®å’Œä¾èµ–
â”‚  â”œâ”€ package-lock.json               # npm ä¾èµ–é”å®š
â”‚  â”œâ”€ pnpm-lock.yaml                  # pnpm ä¾èµ–é”å®šï¼ˆå¯é€‰ï¼‰
â”‚  â”œâ”€ tsconfig.json                   # TypeScript é…ç½®
â”‚  â”œâ”€ next.config.ts                  # Next.js é…ç½®
â”‚  â”œâ”€ next.config.js                  # Next.js é…ç½®å¤‡ä»½
â”‚  â”œâ”€ tailwind.config.ts              # Tailwind CSS é…ç½®
â”‚  â”œâ”€ postcss.config.mjs              # PostCSS é…ç½®
â”‚  â”œâ”€ eslint.config.mjs               # ESLint é…ç½®
â”‚  â””â”€ .cursorrules                    # Cursor AI é…ç½®
â”‚
â”œâ”€ ğŸ¨ å‰ç«¯æºä»£ç ï¼ˆFrontend - Next.js + Reactï¼‰
â”‚  â””â”€ src/
â”‚     â”œâ”€ app/                         # Next.js App Router é¡µé¢
â”‚     â”‚  â”œâ”€ layout.tsx
â”‚     â”‚  â”œâ”€ page.tsx                  # é¦–é¡µ
â”‚     â”‚  â”œâ”€ api/                      # API è·¯ç”±
â”‚     â”‚  â””â”€ onboarding/               # æ¬¢è¿é¡µé¢
â”‚     â”‚
â”‚     â”œâ”€ components/                  # React ç»„ä»¶
â”‚     â”‚  â”œâ”€ ui/                       # UI åŸºç¡€ç»„ä»¶ï¼ˆShadcnï¼‰
â”‚     â”‚  â”œâ”€ BuyPositionForm.tsx       # ä¹°å…¥è¡¨å•
â”‚     â”‚  â”œâ”€ PositionList.tsx          # æŒä»“åˆ—è¡¨
â”‚     â”‚  â”œâ”€ Portfolio.tsx             # ç»„åˆå±•ç¤º
â”‚     â”‚  â”œâ”€ HomePage.tsx              # é¦–é¡µç»„ä»¶
â”‚     â”‚  â”œâ”€ Onboarding.tsx            # æ¬¢è¿ç»„ä»¶
â”‚     â”‚  â””â”€ index.ts                  # ç»„ä»¶å¯¼å‡º
â”‚     â”‚
â”‚     â”œâ”€ hooks/                       # è‡ªå®šä¹‰ React Hook
â”‚     â”‚  â”œâ”€ usePositions.ts           # æŒä»“æ•°æ® Hook
â”‚     â”‚  â””â”€ usePortfolio.ts           # ç»„åˆæ•°æ® Hook
â”‚     â”‚
â”‚     â”œâ”€ lib/                         # å·¥å…·å‡½æ•°å’Œç±»å‹
â”‚     â”‚  â”œâ”€ types.ts                  # TypeScript ç±»å‹å®šä¹‰
â”‚     â”‚  â”œâ”€ db.ts                     # æ•°æ®åº“ API åŒ…è£…å±‚
â”‚     â”‚  â”œâ”€ portfolioUtils.ts         # ç»„åˆå·¥å…·å‡½æ•°
â”‚     â”‚  â””â”€ utils.ts                  # é€šç”¨å·¥å…·å‡½æ•°
â”‚     â”‚
â”‚     â”œâ”€ types/                       # TypeScript å…¨å±€ç±»å‹
â”‚     â”‚  â””â”€ global.d.ts               # å…¨å±€ç±»å‹å£°æ˜
â”‚     â”‚
â”‚     â””â”€ styles/                      # æ ·å¼æ–‡ä»¶
â”‚        â””â”€ globals.css               # å…¨å±€æ ·å¼
â”‚
â”œâ”€ ğŸ¦€ åç«¯æºä»£ç ï¼ˆBackend - Tauri + Rustï¼‰
â”‚  â””â”€ src-tauri/
â”‚     â”œâ”€ src/
â”‚     â”‚  â”œâ”€ main.rs                   # Rust ä¸»ç¨‹åº
â”‚     â”‚  â””â”€ lib.rs                    # Rust åº“æ–‡ä»¶
â”‚     â”‚
â”‚     â”œâ”€ Cargo.toml                   # Rust ä¾èµ–é…ç½®
â”‚     â”œâ”€ Cargo.lock                   # Rust ä¾èµ–é”å®š
â”‚     â”œâ”€ tauri.conf.json              # Tauri åº”ç”¨é…ç½®
â”‚     â”œâ”€ build.rs                     # æ„å»ºè„šæœ¬
â”‚     â”œâ”€ capabilities/                # Tauri æƒé™é…ç½®
â”‚     â”œâ”€ icons/                       # åº”ç”¨å›¾æ ‡
â”‚     â””â”€ positions.db                 # SQLite æ•°æ®åº“ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
â”‚
â”œâ”€ ğŸ“š æ–‡æ¡£ï¼ˆDocumentationï¼‰
â”‚  â””â”€ docs/
â”‚     â”œâ”€ project-structure.md         # æœ¬æ–‡æ¡£
â”‚     â”œâ”€ migration-plan.md            # Java ç‰ˆæœ¬å®Œæ•´è¿ç§»è®¡åˆ’ â­
â”‚     â”œâ”€ gap-analysis.md              # ä¸ Java ç‰ˆæœ¬åŠŸèƒ½å·®è·åˆ†æ
â”‚     â”œâ”€ storage-design.md            # å­˜å‚¨æ–¹æ¡ˆè®¾è®¡æ–‡æ¡£
â”‚     â””â”€ code-review.md               # ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–å»ºè®®
â”‚
â””â”€ ğŸ› ï¸ å…¶ä»–æ–‡ä»¶ï¼ˆOther Filesï¼‰
   â”œâ”€ .gitignore                      # Git å¿½ç•¥æ–‡ä»¶
   â”œâ”€ .git/                           # Git ä»“åº“
   â”œâ”€ readme.md                       # é¡¹ç›® README
   â”œâ”€ clean-ports.sh                  # æ¸…ç†ç«¯å£çš„è„šæœ¬
   â”œâ”€ node_modules/                   # Node.js ä¾èµ–ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
   â””â”€ .next/                          # Next.js æ„å»ºç¼“å­˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

---

## äºŒã€æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Next.js 15** - React æ¡†æ¶ï¼ˆApp Routerï¼‰
- **React 19** - UI åº“
- **TypeScript 5.7** - ç±»å‹ç³»ç»Ÿ
- **Tailwind CSS 3.4** - æ ·å¼æ¡†æ¶
- **Shadcn/ui** - UI ç»„ä»¶åº“
- **Radix UI** - æ— æ ·å¼ç»„ä»¶åŸºç¡€

### åç«¯
- **Tauri 2.2** - æ¡Œé¢åº”ç”¨æ¡†æ¶
- **Rust** - åç«¯è¯­è¨€
- **SQLite** - æœ¬åœ°æ•°æ®åº“

### å¼€å‘å·¥å…·
- **ESLint 9** - ä»£ç æ£€æŸ¥
- **PostCSS 8** - CSS å¤„ç†
- **npm** - åŒ…ç®¡ç†å™¨

---

## ä¸‰ã€å…³é”®æ–‡ä»¶è¯´æ˜

### é…ç½®æ–‡ä»¶

#### `package.json`
é¡¹ç›®çš„ npm é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†ï¼š
- é¡¹ç›®å…ƒæ•°æ®ï¼ˆåç§°ã€ç‰ˆæœ¬ç­‰ï¼‰
- ä¾èµ–åŒ…åˆ—è¡¨
- å¼€å‘è„šæœ¬å‘½ä»¤

**å…³é”®å‘½ä»¤:**
```json
{
  "scripts": {
    "dev": "tauri dev",              // å¯åŠ¨å¼€å‘æ¨¡å¼
    "next:dev": "next dev -p 3001",  // ä»…å¯åŠ¨ Next.js
    "build": "next build && tauri build", // æ„å»ºç”Ÿäº§ç‰ˆæœ¬
    "lint": "next lint"              // ä»£ç æ£€æŸ¥
  }
}
```

#### `tsconfig.json`
TypeScript ç¼–è¯‘é…ç½®ï¼š
- è®¾ç½® `@/*` è·¯å¾„åˆ«åæŒ‡å‘ `./src/*`
- é…ç½® Next.js æ’ä»¶
- å¼•å…¥ Tauri API ç±»å‹å®šä¹‰

#### `tauri.conf.json`
Tauri åº”ç”¨é…ç½®ï¼š
- åº”ç”¨æ ‡è¯†ç¬¦å’Œäº§å“åç§°
- æ„å»ºå‘½ä»¤å’Œè¾“å‡ºç›®å½•
- çª—å£å¤§å°ã€æƒé™ç­‰

### å‰ç«¯å…³é”®æ–‡ä»¶

#### `src/app/page.tsx`
åº”ç”¨ä¸»é¡µé¢ï¼ŒNext.js App Router å…¥å£ã€‚

#### `src/components/`
æ‰€æœ‰ React ç»„ä»¶ï¼š
- `ui/` - åŸºç¡€ UI ç»„ä»¶ï¼ˆæŒ‰é’®ã€è¾“å…¥æ¡†ã€å¯¹è¯æ¡†ç­‰ï¼‰
- ä¸šåŠ¡ç»„ä»¶ï¼ˆè¡¨å•ã€åˆ—è¡¨ã€ç»„åˆå±•ç¤ºç­‰ï¼‰

#### `src/hooks/`
è‡ªå®šä¹‰ React Hooksï¼š
- `usePositions.ts` - ç®¡ç†æŒä»“æ•°æ®çŠ¶æ€å’Œæ“ä½œ
- `usePortfolio.ts` - ç®¡ç†ç»„åˆæ•°æ®

#### `src/lib/`
å·¥å…·å‡½æ•°å’Œç±»å‹å®šä¹‰ï¼š
- `types.ts` - TypeScript ç±»å‹å®šä¹‰
- `db.ts` - æ•°æ®åº“ API åŒ…è£…å±‚ï¼ˆè°ƒç”¨ Tauri å‘½ä»¤ï¼‰
- `utils.ts` - é€šç”¨å·¥å…·å‡½æ•°

### åç«¯å…³é”®æ–‡ä»¶

#### `src-tauri/src/main.rs`
Rust ä¸»ç¨‹åºï¼ŒåŒ…å«ï¼š
- æ•°æ®åº“åˆå§‹åŒ–
- Tauri å‘½ä»¤å®šä¹‰ï¼ˆ`#[tauri::command]`ï¼‰
- æŒä»“å¢åˆ æ”¹æŸ¥é€»è¾‘

#### `src-tauri/Cargo.toml`
Rust ä¾èµ–é…ç½®ï¼š
- `tauri` - Tauri æ¡†æ¶
- `rusqlite` - SQLite æ•°æ®åº“é©±åŠ¨
- `serde` - åºåˆ—åŒ–/ååºåˆ—åŒ–

#### `src-tauri/tauri.conf.json`
Tauri åº”ç”¨é…ç½®ï¼š
- æ„å»ºå‘½ä»¤ï¼š`beforeDevCommand` / `beforeBuildCommand`
- å‰ç«¯è¾“å‡ºç›®å½•ï¼š`frontendDist: "./out"`
- å¼€å‘æœåŠ¡å™¨ï¼š`devUrl: "http://localhost:3001"`

---

## å››ã€æ•°æ®æµ

```
ç”¨æˆ·æ“ä½œ
  â†“
[React ç»„ä»¶] (BuyPositionForm / PositionList)
  â†“
[è‡ªå®šä¹‰ Hook] (usePositions)
  â†“
[API å±‚] (db.ts)
  â†“
[Tauri IPC] (invoke)
  â†“
[Rust å‘½ä»¤] (save_position / get_positions)
  â†“
[SQLite æ•°æ®åº“] (positions.db)
```

---

## äº”ã€å¼€å‘å·¥ä½œæµ

### å¯åŠ¨å¼€å‘ç¯å¢ƒ
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm install          # å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
npm run dev          # å¯åŠ¨ Tauri + Next.js å¼€å‘æ¨¡å¼
```

### å•ç‹¬å¯åŠ¨å‰ç«¯ï¼ˆè°ƒè¯•ç”¨ï¼‰
```bash
npm run next:dev     # ä»…å¯åŠ¨ Next.jsï¼ˆç«¯å£ 3001ï¼‰
```

### ä»£ç æ£€æŸ¥
```bash
npm run lint         # è¿è¡Œ ESLint
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build        # æ„å»º Next.js + Tauri åº”ç”¨
```

---

## å…­ã€ç›®å½•è®¾è®¡åŸåˆ™

### 1. å‰åç«¯åˆ†ç¦»
- `src/` - å‰ç«¯ä»£ç ï¼ˆNext.js + Reactï¼‰
- `src-tauri/` - åç«¯ä»£ç ï¼ˆRustï¼‰

### 2. é…ç½®æ–‡ä»¶é›†ä¸­åœ¨æ ¹ç›®å½•
- æ‰€æœ‰é¡¹ç›®çº§é…ç½®æ–‡ä»¶æ”¾åœ¨æ ¹ç›®å½•
- æ˜“äºæŸ¥æ‰¾å’Œä¿®æ”¹

### 3. æ¨¡å—åŒ–ç»„ç»‡
- ç»„ä»¶æŒ‰åŠŸèƒ½åˆ†ç±»ï¼ˆ`ui/` åŸºç¡€ç»„ä»¶ï¼Œä¸šåŠ¡ç»„ä»¶åœ¨å¤–å±‚ï¼‰
- Hooks ç‹¬ç«‹ç›®å½•
- å·¥å…·å‡½æ•°å’Œç±»å‹å®šä¹‰åœ¨ `lib/`

### 4. æ–‡æ¡£ç‹¬ç«‹ç›®å½•
- `docs/` åŒ…å«æ‰€æœ‰é¡¹ç›®æ–‡æ¡£
- è®¾è®¡æ–‡æ¡£ã€ä»£ç å®¡æŸ¥ã€æ¶æ„è¯´æ˜ç­‰

---

## ä¸ƒã€ä¼˜åŒ–è¿›åº¦

æ ¹æ® [code-review.md](./code-review.md) çš„å»ºè®®ï¼Œä¼˜åŒ–è¿›åº¦å¦‚ä¸‹ï¼š

### åç«¯ï¼ˆRustï¼‰âœ… å·²å®Œæˆ
- [x] å°† `main.rs` æ¨¡å—åŒ–æ‹†åˆ† â†’ **å·²å®Œæˆ**
- [x] åˆ›å»º `commands/`ã€`db/`ã€`models/` ç›®å½• â†’ **å·²å®Œæˆ**
- [x] é‡æ„æ•°æ®åº“è¡¨ç»“æ„ â†’ **å·²å®Œæˆ**ï¼ˆ8 ä¸ªå­—æ®µçš„ä¼˜åŒ–è®¾è®¡ï¼‰
- [x] å®ç°æ•°æ®åº“è¿ç§»è„šæœ¬ â†’ **å·²å®Œæˆ**ï¼ˆmigration.rsï¼‰
- [x] é”™è¯¯å¤„ç†æ¨¡å—åŒ– â†’ **å·²å®Œæˆ**ï¼ˆerror.rsï¼‰

### å‰ç«¯ï¼ˆTypeScriptï¼‰â³ è¿›è¡Œä¸­
- [ ] æ‹†åˆ† `types.ts` ä¸ºå­˜å‚¨ç±»å‹å’Œå±•ç¤ºç±»å‹
- [ ] é‡æ„ `usePositions` Hook ä»¥é€‚é…æ–° API
- [ ] æ›´æ–° `BuyPositionForm` ç»„ä»¶
- [ ] åˆ›å»º `SellPositionForm` ç»„ä»¶

### é…ç½®æ–‡ä»¶ âœ… å·²æ£€æŸ¥
- [x] `package.json` - é¡¹ç›®åç§°å·²æ­£ç¡®è®¾ç½®ä¸º `investment-tracker`
- [x] `.gitignore` - å·²æ­£ç¡®é…ç½®
- [x] `readme.md` - å¯åŠ¨è¯´æ˜å·²æ›´æ–°

---

## å…«ã€ç‰ˆæœ¬å†å²

### v0.2.0ï¼ˆå¼€å‘ä¸­ï¼‰
- [x] å®Œæˆå­˜å‚¨æ–¹æ¡ˆé‡æ„
- [x] å®ç°æ¨¡å—åŒ–åç«¯ç»“æ„ï¼ˆcommands/, db/, models/ï¼‰
- [x] ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œæ•°æ®åº“è¿ç§»
- [ ] ä¼˜åŒ–å‰ç«¯ç±»å‹å®šä¹‰ - **è¿›è¡Œä¸­**
- [ ] å‰ç«¯ Hook å’Œç»„ä»¶é€‚é… - **å¾…è¿›è¡Œ**

### v0.1.0ï¼ˆå·²å®Œæˆï¼‰
- [x] å®Œæˆç›®å½•ç»“æ„æ‰å¹³åŒ–ï¼ˆç§»é™¤ `next-app` å±‚çº§ï¼‰
- [x] åŸºç¡€çš„æŒä»“å½•å…¥å’Œå±•ç¤ºåŠŸèƒ½
- [x] æ”¯æŒå¤šä¸ªæŠ•èµ„ç»„åˆ

---

## ä¹ã€ç›¸å…³æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£
- [è¿ç§»è®¡åˆ’](./migration-plan.md) - **Java ç‰ˆæœ¬å®Œæ•´è¿ç§»è·¯çº¿å›¾** â­
- [åŠŸèƒ½å·®è·åˆ†æ](./gap-analysis.md) - ä¸ Java ç‰ˆæœ¬çš„åŠŸèƒ½å¯¹æ¯”

### æŠ€æœ¯æ–‡æ¡£
- [å­˜å‚¨æ–¹æ¡ˆè®¾è®¡](./storage-design.md) - æ•°æ®åº“è¡¨ç»“æ„å’Œ API è®¾è®¡
- [ä»£ç å®¡æŸ¥](./code-review.md) - ä»£ç ä¼˜åŒ–å»ºè®®å’Œé‡æ„è®¡åˆ’

### å…¶ä»–
- [é¡¹ç›® README](../readme.md) - é¡¹ç›®ä»‹ç»å’Œå¿«é€Ÿå¼€å§‹

## åã€æ–‡æ¡£æ›´æ–°è®°å½•

| æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|---------|
| 2025-11-08 | æ›´æ–°ä¼˜åŒ–è¿›åº¦ï¼šæ ‡è®°åç«¯æ¨¡å—åŒ–å·²å®Œæˆï¼Œå‰ç«¯é€‚é…å¾…è¿›è¡Œ |
| 2025-11-07 | åˆå§‹ç‰ˆæœ¬ï¼šè¯¦ç»†çš„é¡¹ç›®ç»“æ„è¯´æ˜ |

---

**æœ€åæ›´æ–°:** 2025-11-08
**ç»´æŠ¤è€…:** InvestmentTracker å¼€å‘å›¢é˜Ÿ
