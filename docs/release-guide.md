# ğŸ“¦ InvestmentTracker å‘å¸ƒæŒ‡å—

## ğŸ¯ è‡ªåŠ¨å‘å¸ƒæµç¨‹æ¦‚è¿°

æœ¬é¡¹ç›®å·²é…ç½® GitHub Actions è‡ªåŠ¨æ‰“åŒ…å‘å¸ƒæµç¨‹ï¼Œæ¨é€ tag åä¼šè‡ªåŠ¨æ„å»º macOS å’Œ Windows ä¾¿æºç‰ˆã€‚

---

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. åº”ç”¨ä¿¡æ¯
- **åº”ç”¨åç§°**: InvestmentTracker
- **Bundle ID**: com.deewooo.investmenttracker
- **å½“å‰ç‰ˆæœ¬**: 0.1.0

### 2. æ„å»ºå¹³å°
- âœ… **macOS**: ç”Ÿæˆ `.app` æ–‡ä»¶ï¼Œæ‰“åŒ…æˆ `.zip`
- âœ… **Windows**: ç”Ÿæˆ NSIS å®‰è£…ç¨‹åºï¼ˆä¾¿æºç‰ˆï¼‰

### 3. å‘å¸ƒæ–¹å¼
- è‡ªåŠ¨å‘å¸ƒåˆ° GitHub Releasesï¼ˆéè‰ç¨¿ï¼‰
- è§¦å‘æ–¹å¼ï¼šæ¨é€ `v*` æ ¼å¼çš„ tagï¼ˆå¦‚ `v0.1.0`ï¼‰
- æ”¯æŒæ‰‹åŠ¨è§¦å‘ï¼ˆworkflow_dispatchï¼‰

---

## ğŸš€ å‘å¸ƒæ­¥éª¤

### æ–¹å¼ä¸€ï¼šæ¨é€ Tag è‡ªåŠ¨å‘å¸ƒï¼ˆæ¨èï¼‰

#### æ­¥éª¤ 1: æ›´æ–°ç‰ˆæœ¬å·

åŒæ—¶ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ï¼ˆä¿æŒä¸€è‡´ï¼‰ï¼š

**æ–‡ä»¶ 1: `package.json`**
```json
{
  "version": "0.1.0"  // æ”¹æˆä½ è¦å‘å¸ƒçš„ç‰ˆæœ¬å·
}
```

**æ–‡ä»¶ 2: `src-tauri/tauri.conf.json`**
```json
{
  "version": "0.1.0"  // æ”¹æˆç›¸åŒçš„ç‰ˆæœ¬å·
}
```

**æ–‡ä»¶ 3: `src-tauri/Cargo.toml`**
```toml
[package]
version = "0.1.0"  // æ”¹æˆç›¸åŒçš„ç‰ˆæœ¬å·
```

#### æ­¥éª¤ 2: æäº¤ä»£ç 

```bash
# æäº¤ç‰ˆæœ¬æ›´æ–°
git add .
git commit -m "chore: bump version to v0.1.0"
git push
```

#### æ­¥éª¤ 3: æ‰“ Tag è§¦å‘æ„å»º

```bash
# åˆ›å»º tagï¼ˆç‰ˆæœ¬å·è¦å’Œä¸Šé¢ä¿æŒä¸€è‡´ï¼‰
git tag v0.1.0

# æ¨é€ tagï¼ˆè¿™ä¼šè‡ªåŠ¨è§¦å‘ GitHub Actionsï¼‰
git push origin v0.1.0
```

#### æ­¥éª¤ 4: ç­‰å¾…æ„å»ºå®Œæˆ

1. è®¿é—®ä½ çš„ GitHub ä»“åº“
2. ç‚¹å‡» `Actions` æ ‡ç­¾é¡µ
3. æŸ¥çœ‹ `Release` workflow çš„è¿è¡ŒçŠ¶æ€

**æ„å»ºæ—¶é—´ä¼°è®¡**ï¼š
- macOS: çº¦ 10-15 åˆ†é’Ÿ
- Windows: çº¦ 10-15 åˆ†é’Ÿ
- æ€»è®¡: çº¦ 15-20 åˆ†é’Ÿï¼ˆå¹¶è¡Œæ„å»ºï¼‰

#### æ­¥éª¤ 5: æŸ¥çœ‹å‘å¸ƒç»“æœ

æ„å»ºæˆåŠŸåï¼š
1. è®¿é—® `Releases` é¡µé¢ï¼š`https://github.com/ä½ çš„ç”¨æˆ·å/InvestmentTracker/releases`
2. ä¼šçœ‹åˆ°æ–°åˆ›å»ºçš„ Release `InvestmentTracker v0.1.0`
3. åŒ…å«çš„æ–‡ä»¶ï¼š
   - `InvestmentTracker_x.x.x_x64.app.tar.gz` (macOS)
   - `InvestmentTracker_x.x.x_x64-setup.nsis.zip` (Windows)

---

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨è§¦å‘æ„å»º

å¦‚æœä½ æƒ³åœ¨ä¸æ‰“ tag çš„æƒ…å†µä¸‹æµ‹è¯•æ„å»ºï¼š

1. è®¿é—® GitHub ä»“åº“
2. ç‚¹å‡» `Actions` æ ‡ç­¾é¡µ
3. é€‰æ‹© `Release` workflow
4. ç‚¹å‡»å³ä¾§ `Run workflow` æŒ‰é’®
5. é€‰æ‹©åˆ†æ”¯åç‚¹å‡» `Run workflow`

> âš ï¸ æ³¨æ„ï¼šæ‰‹åŠ¨è§¦å‘ä¸ä¼šåˆ›å»º Releaseï¼Œåªä¼šè¿è¡Œæ„å»ºæµç¨‹

---

## ğŸ“¥ ç”¨æˆ·ä¸‹è½½å’Œä½¿ç”¨

### macOS ç”¨æˆ·

1. ä¸‹è½½ `InvestmentTracker_x.x.x_x64.app.tar.gz`
2. è§£å‹å¾—åˆ° `InvestmentTracker.app`
3. åŒå‡»è¿è¡Œï¼ˆé¦–æ¬¡å¯èƒ½éœ€è¦å³é”® â†’ æ‰“å¼€ï¼‰

**ç»•è¿‡å®‰å…¨æç¤º**ï¼ˆæœªç­¾ååº”ç”¨ï¼‰ï¼š
```bash
# æ–¹æ³• 1: å³é”®ç‚¹å‡» .app æ–‡ä»¶ â†’ æ‰“å¼€ â†’ ç‚¹å‡»"æ‰“å¼€"

# æ–¹æ³• 2: å‘½ä»¤è¡Œç§»é™¤éš”ç¦»å±æ€§
xattr -cr InvestmentTracker.app
```

### Windows ç”¨æˆ·

1. ä¸‹è½½ `InvestmentTracker_x.x.x_x64-setup.nsis.zip`
2. è§£å‹å¹¶è¿è¡Œå®‰è£…ç¨‹åº
3. å®‰è£…åå³å¯ä½¿ç”¨

**ç»•è¿‡ SmartScreen æç¤º**ï¼ˆæœªç­¾ååº”ç”¨ï¼‰ï¼š
- ç‚¹å‡»"æ›´å¤šä¿¡æ¯" â†’ "ä»è¦è¿è¡Œ"

---

## ğŸ”§ æ„å»ºäº§ç‰©è¯´æ˜

### macOS

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.app.tar.gz` | å‹ç¼©çš„åº”ç”¨åŒ… |
| `.dmg` | DMG å®‰è£…é•œåƒï¼ˆå¦‚æœç”Ÿæˆï¼‰ |

### Windows

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `-setup.nsis.zip` | NSIS å®‰è£…ç¨‹åº |
| `.msi` | MSI å®‰è£…åŒ…ï¼ˆå¦‚æœç”Ÿæˆï¼‰ |

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ„å»ºå¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- ç‰ˆæœ¬å·ä¸ä¸€è‡´
- ä¾èµ–å®‰è£…å¤±è´¥
- Rust ç¼–è¯‘é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
1. æŸ¥çœ‹ GitHub Actions æ—¥å¿—
2. ç¡®è®¤ä¸‰ä¸ªæ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ä¸€è‡´
3. åœ¨æœ¬åœ°è¿è¡Œ `npm run build` æµ‹è¯•

### é—®é¢˜ 2: macOS åº”ç”¨æ— æ³•æ‰“å¼€

**é”™è¯¯æç¤º**: "æ— æ³•æ‰“å¼€ï¼Œå› ä¸ºæ— æ³•éªŒè¯å¼€å‘è€…"

**è§£å†³æ–¹æ³•**ï¼š
```bash
# ç§»é™¤éš”ç¦»å±æ€§
xattr -cr InvestmentTracker.app
```

### é—®é¢˜ 3: Windows SmartScreen è­¦å‘Š

**é”™è¯¯æç¤º**: "Windows å·²ä¿æŠ¤ä½ çš„ç”µè„‘"

**è§£å†³æ–¹æ³•**ï¼š
- ç‚¹å‡»"æ›´å¤šä¿¡æ¯" â†’ "ä»è¦è¿è¡Œ"
- æˆ–è€…è´­ä¹°ä»£ç ç­¾åè¯ä¹¦è¿›è¡Œç­¾å

### é—®é¢˜ 4: ç‰ˆæœ¬å·ä¸åŒ¹é…

**ç°è±¡**: æ„å»ºæˆåŠŸä½†ç‰ˆæœ¬å·æ˜¾ç¤ºé”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
ç¡®ä¿ä»¥ä¸‹ä¸‰ä¸ªæ–‡ä»¶ç‰ˆæœ¬å·ä¸€è‡´ï¼š
- `package.json`
- `src-tauri/tauri.conf.json`
- `src-tauri/Cargo.toml`

---

## ğŸ“ ç‰ˆæœ¬ç®¡ç†å»ºè®®

### è¯­ä¹‰åŒ–ç‰ˆæœ¬

éµå¾ª [Semantic Versioning](https://semver.org/lang/zh-CN/)ï¼š

- **ä¸»ç‰ˆæœ¬å· (MAJOR)**: ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å· (MINOR)**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å· (PATCH)**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

**ç¤ºä¾‹**ï¼š
- `v0.1.0` â†’ åˆå§‹ç‰ˆæœ¬
- `v0.1.1` â†’ Bug ä¿®å¤
- `v0.2.0` â†’ æ–°åŠŸèƒ½
- `v1.0.0` â†’ æ­£å¼ç‰ˆæœ¬

### å‘å¸ƒå‘¨æœŸå»ºè®®

- **æµ‹è¯•ç‰ˆ**: `v0.x.x`ï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰
- **ç¨³å®šç‰ˆ**: `v1.x.x`ï¼ˆåŠŸèƒ½ç¨³å®šåï¼‰
- **æ›´æ–°é¢‘ç‡**: æ ¹æ®éœ€æ±‚ï¼Œå»ºè®®æ¯å‘¨æˆ–æ¯æœˆå‘å¸ƒ

---

## ğŸ¨ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ Release è¯´æ˜

ç¼–è¾‘ `.github/workflows/release.yml`:

```yaml
releaseBody: |
  ## ğŸ“¦ ä¸‹è½½è¯´æ˜
  
  - **macOS**: ä¸‹è½½ `.app.tar.gz` æ–‡ä»¶
  - **Windows**: ä¸‹è½½ `-setup.nsis.zip` æ–‡ä»¶
  
  ## âœ¨ æ›´æ–°å†…å®¹
  
  - æ–°å¢åŠŸèƒ½ A
  - ä¿®å¤ Bug B
  
  ## ğŸ“– ä½¿ç”¨è¯´æ˜
  
  è¯¦è§ [ä½¿ç”¨æ–‡æ¡£](é“¾æ¥)
```

### æ·»åŠ æ›´å¤šå¹³å°

å¦‚éœ€æ·»åŠ  Linux æ”¯æŒï¼Œä¿®æ”¹ `.github/workflows/release.yml`:

```yaml
matrix:
  platform: [macos-latest, windows-latest, ubuntu-20.04]
```

å¹¶æ·»åŠ  Linux ä¾èµ–å®‰è£…æ­¥éª¤ï¼š

```yaml
- name: Install dependencies (ubuntu only)
  if: matrix.platform == 'ubuntu-20.04'
  run: |
    sudo apt-get update
    sudo apt-get install -y libgtk-3-dev libwebkit2gtk-4.0-dev \
      libappindicator3-dev librsvg2-dev patchelf
```

---

## ğŸ” ä»£ç ç­¾åï¼ˆå¯é€‰ï¼‰

### macOS ç­¾å

éœ€è¦ Apple Developer è´¦å· ($99/å¹´)ï¼š

1. åœ¨ Apple Developer åˆ›å»ºè¯ä¹¦
2. å¯¼å‡ºè¯ä¹¦ä¸º `.p12` æ–‡ä»¶
3. åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ  Secrets:
   - `APPLE_CERTIFICATE`
   - `APPLE_CERTIFICATE_PASSWORD`
   - `APPLE_SIGNING_IDENTITY`
   - `APPLE_ID`
   - `APPLE_PASSWORD`

4. ä¿®æ”¹ workflow æ·»åŠ ç­¾åæ­¥éª¤

### Windows ç­¾å

éœ€è¦è´­ä¹°ä»£ç ç­¾åè¯ä¹¦ï¼ˆçº¦ $75-300/å¹´ï¼‰ï¼š

1. è·å–è¯ä¹¦æ–‡ä»¶
2. åœ¨ GitHub æ·»åŠ  Secrets:
   - `WINDOWS_CERTIFICATE`
   - `WINDOWS_CERTIFICATE_PASSWORD`

3. ä¿®æ”¹ workflow æ·»åŠ ç­¾åæ­¥éª¤

> ğŸ’¡ **æç¤º**: ä¸ªäººé¡¹ç›®å¯æš‚æ—¶ä¸ç­¾åï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å³é”®/æ›´å¤šä¿¡æ¯ç»•è¿‡è­¦å‘Š

---

## ğŸ“Š ç›‘æ§å’Œé€šçŸ¥

### GitHub Actions å¾½ç« 

åœ¨ README ä¸­æ·»åŠ æ„å»ºçŠ¶æ€å¾½ç« ï¼š

```markdown
![Release](https://github.com/ä½ çš„ç”¨æˆ·å/InvestmentTracker/workflows/Release/badge.svg)
```

### é‚®ä»¶é€šçŸ¥

GitHub Actions é»˜è®¤ä¼šåœ¨æ„å»ºå¤±è´¥æ—¶å‘é‚®ä»¶é€šçŸ¥ä½ ã€‚

---

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–

### å¯é€‰å¢å¼ºåŠŸèƒ½

- [ ] æ·»åŠ è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ï¼ˆTauri Updaterï¼‰
- [ ] é›†æˆ Changelog è‡ªåŠ¨ç”Ÿæˆ
- [ ] æ·»åŠ ä»£ç ç­¾å
- [ ] æ”¯æŒå¤šè¯­è¨€ç‰ˆæœ¬
- [ ] æ·»åŠ å´©æºƒæŠ¥å‘Š
- [ ] é›†æˆåˆ†æç»Ÿè®¡

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- [GitHub Actions æ—¥å¿—](https://github.com/ä½ çš„ç”¨æˆ·å/InvestmentTracker/actions)
- [Tauri æ–‡æ¡£](https://tauri.app/zh-cn/v1/guides/)
- æäº¤ Issue

---

**æœ€åæ›´æ–°**: 2025-11-12

